<%-include("./components/head")%>
<body class="bgColor">
    <%-include("./components/navbar")%>
    <div style="width: 80%; margin: 0 auto;">

        <div style=" margin: 1em 0 1em 0;">
            <form style="float: left;" action="">
                <button class="btn btn-success" style="border-radius: 1em; background-color: #589636;">+ add an item</button>
            </form>
            <form style="width: 25%; margin: 1em 0 1em auto;" class="form-inline my-2 my-lg-0" action="/search" method="GET">
                <input class="form-control mr-sm-2" style=" border-radius: 1em;" type="search" placeholder="Search" aria-label="Search" name="searchParam">
            </form>
        </div>
        
        <div style="border-radius: 1em 1em 1em 1em;">
            <table class="table table-striped table-hover">
                <thead class="green">
                    <tr>
                        <th scope="col" style="border-radius: 1em 0px 0px 0px;">#</th>
                        <th scope="col">Item Name</th>
                        <th scope="col">Price</th>
                        <th scope="col">Date Added</th>
                        <th scope="col" style="border-radius: 0px 1em 0px 0px;"></th>
                    </tr>
                </thead>
                <tbody style="background-color: white">
                    <% let ctr = 1; %>
                    <% for(item of items){ %>
                        <% if(ctr-1 == items.length - 1){ %>
                            <tr>
                                <th style="border-radius: 0px 0px 0px 1em; border-bottom: 0px;" scope="row"><%= ctr++ %></th>
                                <td style="border-bottom: 0px;"><a href="/items/<%=item._id%>"><%= item.itemName %></a></td>
                                <td style="border-bottom: 0px;">Php <%= item.itemPrice %></td>
                                <td style="border-bottom: 0px;"><%= item.dateAdded %></td>
                                <td style="border-radius: 0px 0px 1em 0px; border-bottom: 0px;">
                                    <form style="display: inline;" action="/list/<%=item._id%>/?_method=DELETE" method="GET">
                                        <button class="btn btn-outline-primary">edit</button>
                                    </form>
                                    <form style="display: inline;"action="/list/<%=item._id%>/?_method=DELETE" method="POST">
                                        <button class="btn btn-outline-danger">delete</button>
                                    </form>
                                </td>  
                            </tr>
                        <% }else{ %>
                            <tr>
                                <th scpoe="row"><%= ctr++ %></th>
                                <td><a href="/list/<%=item._id%>"><%= item.itemName %></a></td>
                                <td>Php <%= item.itemPrice %></td>
                                <td><%= item.dateAdded %></td>
                                <td>
                                    <form style="display: inline;" action="/list/<%=item._id%>/edit" method="GET">
                                        <button class="btn btn-outline-primary">edit</button>
                                    </form>
                                    <form style="display: inline;" action="/list/<%=item._id%>/?_method=DELETE" method="POST">
                                        <button class="btn btn-outline-danger">delete</button>
                                    </form>
                                </td>
                            </tr>
                        <% } %>
                    <% } %>
                </tbody>
            </table>
        </div>
        
    </div>
    
</body>
</html>